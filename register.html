<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Assemblr - Register</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="{{ url_for('index') }}">Assemblr</a>
        </div>
    </nav>

    <div class="container mt-5">
        <div class="row">
            <div class="col-md-8 offset-md-2">
                <div class="card">
                    <div class="card-header">
                        <h3 class="text-center mb-0">Register</h3>
                    </div>
                    <div class="card-body">
                        {% with messages = get_flashed_messages() %}
                            {% if messages %}
                                {% for message in messages %}
                                    <div class="alert alert-info">{{ message }}</div>
                                {% endfor %}
                            {% endif %}
                        {% endwith %}

                        <form method="POST" action="{{ url_for('register') }}" enctype="multipart/form-data" id="registrationForm">
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="first_name" class="form-label">First Name</label>
                                    <input type="text" class="form-control" id="first_name" name="first_name" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="last_name" class="form-label">Last Name</label>
                                    <input type="text" class="form-control" id="last_name" name="last_name" required>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="username" class="form-label">Username</label>
                                    <input type="text" class="form-control" id="username" name="username" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="email" class="form-label">Email</label>
                                    <input type="email" class="form-control" id="email" name="email" required>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="phone" class="form-label">Phone</label>
                                    <input type="tel" class="form-control" id="phone" name="phone" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="gender" class="form-label">Gender</label>
                                    <select class="form-select" id="gender" name="gender" required>
                                        <option value="">Select Gender</option>
                                        <option value="male">Male</option>
                                        <option value="female">Female</option>
                                        <option value="other">Other</option>
                                    </select>
                                </div>
                            </div>

                            <div class="mb-3">
                                <label for="address" class="form-label">Address</label>
                                <textarea class="form-control" id="address" name="address" rows="2" required></textarea>
                            </div>

                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="dob" class="form-label">Date of Birth</label>
                                    <input type="date" class="form-control" id="dob" name="dob" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="age" class="form-label">Age</label>
                                    <input type="number" class="form-control" id="age" name="age" required>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="profession" class="form-label">Profession</label>
                                    <select class="form-select" id="profession" name="profession" required>
                                        <option value="">Select Profession</option>
                                        <option value="student">Student</option>
                                        <option value="employee">Employee</option>
                                        <option value="other">Other</option>
                                    </select>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="profile_photo" class="form-label">Profile Photo</label>
                                    <input type="file" class="form-control" id="profile_photo" name="profile_photo" accept="image/*">
                                </div>
                            </div>

                            <!-- Student-specific fields -->
                            <div id="studentFields" style="display: none;">
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="college" class="form-label">College</label>
                                        <input type="text" class="form-control" id="college" name="college">
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="university" class="form-label">University</label>
                                        <input type="text" class="form-control" id="university" name="university">
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="degree" class="form-label">Degree</label>
                                        <input type="text" class="form-control" id="degree" name="degree">
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="semester" class="form-label">Semester</label>
                                        <input type="number" class="form-control" id="semester" name="semester">
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label for="college_address" class="form-label">College Address</label>
                                    <textarea class="form-control" id="college_address" name="college_address" rows="2"></textarea>
                                </div>
                            </div>

                            <!-- Employee-specific fields -->
                            <div id="employeeFields" style="display: none;">
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="company" class="form-label">Company</label>
                                        <input type="text" class="form-control" id="company" name="company">
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="education" class="form-label">Education</label>
                                        <input type="text" class="form-control" id="education" name="education">
                                    </div>
                                </div>
                            </div>

                            <!-- Other profession fields -->
                            <div id="otherFields" style="display: none;">
                                <div class="mb-3">
                                    <label for="other_profession" class="form-label">Specify Profession</label>
                                    <input type="text" class="form-control" id="other_profession" name="other_profession">
                                </div>
                            </div>

                            <!-- Common fields for all professions -->
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="linkedin" class="form-label">LinkedIn Profile</label>
                                    <input type="url" class="form-control" id="linkedin" name="linkedin">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="github" class="form-label">GitHub Profile</label>
                                    <input type="url" class="form-control" id="github" name="github">
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="password" class="form-label">Password</label>
                                    <input type="password" class="form-control" id="password" name="password" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="confirm_password" class="form-label">Confirm Password</label>
                                    <input type="password" class="form-control" id="confirm_password" name="confirm_password" required>
                                    <div id="password-match-feedback" class="invalid-feedback" style="display: none;">
                                        Passwords do not match!
                                    </div>
                                </div>
                            </div>

                            <div class="d-grid gap-2">
                                <button type="submit" class="btn btn-primary" id="registerButton">Register</button>
                            </div>
                        </form>

                        <hr>
                        <div class="text-center">
                            <p class="mb-0">Already have an account? <a href="{{ url_for('login') }}" class="text-decoration-none">Login</a></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const professionSelect = document.getElementById('profession');
            const studentFields = document.getElementById('studentFields');
            const employeeFields = document.getElementById('employeeFields');
            const otherFields = document.getElementById('otherFields');
            const password = document.getElementById('password');
            const confirmPassword = document.getElementById('confirm_password');
            const passwordFeedback = document.getElementById('password-match-feedback');
            const registerButton = document.getElementById('registerButton');
            const registrationForm = document.getElementById('registrationForm');

            // Show/hide fields based on profession
            professionSelect.addEventListener('change', function() {
                studentFields.style.display = 'none';
                employeeFields.style.display = 'none';
                otherFields.style.display = 'none';

                switch(this.value) {
                    case 'student':
                        studentFields.style.display = 'block';
                        break;
                    case 'employee':
                        employeeFields.style.display = 'block';
                        break;
                    case 'other':
                        otherFields.style.display = 'block';
                        break;
                }
            });

            // Password validation
            function validatePasswords() {
                if (password.value !== confirmPassword.value) {
                    passwordFeedback.style.display = 'block';
                    confirmPassword.classList.add('is-invalid');
                    return false;
                } else {
                    passwordFeedback.style.display = 'none';
                    confirmPassword.classList.remove('is-invalid');
                    return true;
                }
            }

            password.addEventListener('input', validatePasswords);
            confirmPassword.addEventListener('input', validatePasswords);

            // Form submission
            registrationForm.addEventListener('submit', function(e) {
                if (!validatePasswords()) {
                    e.preventDefault();
                }
            });

            // Calculate age from date of birth
            const dobInput = document.getElementById('dob');
            const ageInput = document.getElementById('age');

            dobInput.addEventListener('change', function() {
                const dob = new Date(this.value);
                const today = new Date();
                let age = today.getFullYear() - dob.getFullYear();
                const monthDiff = today.getMonth() - dob.getMonth();
                
                if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < dob.getDate())) {
                    age--;
                }
                
                ageInput.value = age;
            });
        });
    </script>
</body>
</html> 